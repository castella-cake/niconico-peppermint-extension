# Change Log

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.6.0] - 2023/07/04

### Added
- ``ショートカットアシスト`` にいいね！のショートカットを追加しました(Hキー)
- ``ExCommander`` を追加しました(Backspaceキーで開く)
- フルスクリーン時でもシアターUIの21:9プレイヤーが適用されるようになりました
- シアターUIの「21:9で拡大」がフルスクリーン時でも機能するようになりました
- シアターUIのフルスクリーン切り替えにアニメーションを追加しました
- シアターUIのプレイヤー設定がサイドバーのように表示されるようになりました
- 大百科記事ダイナミックパレットの試験用ルールを追加しました
- シアターUIやNicoboxUIを使用している場合に、bodyにクラスを付与するようにしました   
シアターUI: ``.is-PMTheaterUI`` 旧Nicobox風UI: ``.is-PMNicoboxUI`` 新Nicobox風UI: ``.is-PMNewNicoboxUI``
- ダークモードを使用している場合に、bodyに``is-PMDarkPalette``クラスを付与するようにしました
- ``シリーズストック`` を使用してストックしているシリーズのエピソードリスト/オーナーがクイックパネルで見られるようになりました   
シリーズストック内のシリーズリストは2時間毎に更新されます。
- ``シリーズストック`` を使用してストックしているシリーズに新しいエピソードがある場合、ツールバーにバッジが表示されるようになりました
- クイックパネルから動画を開く場合、現在のタブがニコニコ動画の場合はそのまま移動、そうでない場合は新しいタブを開くようになりました
- ``ストレージの管理`` ページからローカルストレージを消去/コピーしたり、容量を確認できるようになりました
- ``PepperMintをリセット`` でリセットした際、ローカルストレージもリセットされるようになりました
- クイックパネルのデザインが変更されました
- ``ニコレポリーダー`` を追加しました   
有効化すると、クイックパネルに``ニコレポ`` タブが表示されるようになり、いつでもニコレポを確認できます。新着がある場合はツールバーバッジで通知されます。
- ``Misskeyで共有`` を追加しました   
現在開いている動画をすぐにあなたの好きなMisskeyインスタンスで共有しましょう。

### Changed
- ダークモードCSSの適用方法を可能な限り早くするようにしました
- 原宿視聴テーマのタグ表示を変更しました
- PepperMintUIのアイコン関連を微調整しました
- ダークモードで適用する市場のスタイルはファイルに含めないようになりました
- ダークモード時に視聴ページ内検索バーの色がパレットに揃えられるようになりました
- マーキーランキング表示のグラデーションは削除されました
- ``シリーズストック`` の動画トップ、ニコニコホームへの表示はオプション扱いになり、デフォルトで無効化されました
- ``設定をインポート/エクスポート`` は ``ストレージの管理`` に改名しました(わかりやすくするためにリンクでは引き続き旧名が使用されます)
- ``原宿``,``Mint`` プレイヤーテーマではフルスクリーン時に再びマイリストボタンが表示されるようになりました

### Fixed
- ビジュアルパッチのフォールバックが欠けている問題を修正しました
- シリーズストックの動画移動関連を修正しました
- コメント増量とシアターUIの競合を簡易的に解消しました
- 原宿視聴ページテーマのダークモードサポートを修正しました
- シアターUIのシリーズリンクの順番を更新するようにしました
- マーキーランキング表示のプレイヤースタイル互換性を向上しました
- 視聴ページテーマのダークモード互換性を向上しました
- 設定ページのフォントサイズを固定するようにしました
- Nicobox風UIを使用している場合に、ニコニ広告提供画面の幅がいっぱいに表示される問題を修正しました
- ``原宿``,``Mint``プレイヤーテーマの他拡張機能との互換性が向上しました
- Nicobox風UI,シアターUIを使用している場合にライブ公開タイムシフトへのリンクが中央寄せされない問題を修正しました
- ``シアターUI``もしくは``NicoboxUI``を有効化した状態で、``マーキーエリアコンテンツの置き換え``を``ランキング表示``に設定すると発生するエラーを修正しました

### Removed
- HTTP視聴の終了により、``動画ダウンロードボタンを表示``を削除しました

## [1.5.3] - 2023/05/31

### Fixed
- Chromium環境の場合、シリーズストックを一度も使用したことがない場合に、シリーズを保存できないバグを修正しました(3rd)
- Chromium環境の場合、ダークモードをカスタムに設定し、カスタムカラーパレットを何も設定せずにページを開くと発生するバグを修正しました
- クイックパネルと設定ページでダークモードのカスタム設定の名称が違う問題を修正しました

## [1.5.2] - 2023/05/31

### Fixed
- Chromium環境の場合、シリーズストックを一度も使用したことがない場合に、シリーズを保存できないバグを修正しました(2nd)

### Removed
- 残っていたデバッグ情報を削除しました

## [1.5.1] - 2023/05/31

### Changed
- 大百科のCSS適用方法を更新しました

### Fixed
- Chromium環境の場合、シリーズストックを一度も使用したことがない場合に、シリーズを保存できないバグを修正しました

### Removed
- 一部のコメントされたコードを削除しました

## [1.5.0] - 2023/05/31

### Added
- `プレイヤースタイルのオーバーライド` を追加しました
- `ジャンルと投稿日時以外のメタデータを隠す` を追加しました
- プレイヤーテーマに`GINZA`を追加しました   
- プレイヤーテーマの`RC1`をPepperMintと同じものにし、`RC1Plus`を追加しました
ついにPepperMintの主要機能が全て戻ってきました！   
自分の好きなプレイヤーテーマとプレイヤースタイルをミックスしましょう。
- `カスタムカラーパレット`を追加しました   
これにより、ユーザーがより簡単にPepperMintのパレットを編集できるようになります
- `PepperMintについて`ページとウェルカムページ,設定トップにGithub Sponsorリンクを設置しました   
ウェルカムページと設定トップに関しては「寄付！？寄付ならうちのリポジトリにもいっぱいあるよ！！」と出しゃばりたくないので、   
ただ「寄付あるよ(笑)」と座っているだけにしています。主張の激しいDonateボタンは誰も望んでいません。
- 設定トップにGithubリポジトリへのリンクを設置しました
- `動画記事ボタンを表示`を追加しました
- クイックパネルを追加しました   
今後はツールバーからポップアップを開いたときの設定ページに代わって、クイックパネルが開くようになります。   
シリーズストックにいつでもアクセスできる新しい方法です。
- 設定ページから新しいタブで設定ページを開けるようになりました
- 設定ページにフレーバーテキストを追加しました

### Changed
- ダークモードは``ダークモード/カラーパレット``に名称変更しました
- ダークモードのスタイルシートから、カラーパレットの変数を使用していないものを置き換えました
- 一部のダークモードカラーパレットが変更されました
- CSSの追加にJQueryを使用しないようにしました
- 設定ページのコンテナー関係が少し変更されました
- ダークモードCSSは圧縮されなくなりました
- 一部のスタイル適用方法が、より適したものに変更されました

### Fixed
- PeppermintUIは動画がフルスクリーンの場合に表示されないようになりました
- 動画トップ2カラムのおすすめの動画表示を修正しました
- ダークモード時のニコニコ生放送チャンネル視聴ページを修正しました
- Firefox系環境で、遅いネットワークを使用している場合にシアターUI/Nicobox風UIが大幅に壊れる問題を修正しました

### Removed
- ロゴポリシーに準拠するために、`マーキーエリアコンテンツの置き換え`から`ロゴに置き換え`を削除しました   
動画トップやホームのロゴと違い、コード内にロゴ本体を含めずに表示する合理的な方法が見つかりそうにないためです。
- `タイトルの後に動画記事へのリンクを表示` を削除しました

## [1.4.0] - 2023/04/16

### Added
- `マーキーエリアコンテンツの置き換え`を追加し、新たに`ランキング表示`と`何も表示しない`を追加しました
- 設定のインポートに、信頼できないストレージに関する警告を追加しました
- ウェルカムページをダークモード対応にしました

### Fixed
- カスタム動画トップの上へ移動ボタンが、二行目に対して使えない問題を修正しました
- シリーズページのダークモードサポートを改善しました
- シリーズストックウィンドウで「削除」を押しても、削除できない場合がある問題を修正しました
- 動画トップ2カラムとカスタム動画トップを組み合わせた際に発生する問題を修正

### Removed
- `マーキーテキストをロゴに置き換え`は`マーキーエリアコンテンツの置き換え`の追加により削除されました

### Security
- XSSに関する問題の軽減を行いました

## [1.3.0] - 2023/03/23

### Added
- Nicobox風UIの外観を変更
    `旧スタイルを使用`から1.2.0以前の外観に戻せます

### Changed
- シアターUI/Nicobox風UIのパディング/マージンを変更
- カスタム動画トップの項目をドラッグ可能にしました

### Fixed
- ニコニコ大百科検索のcontextMenuに関する修正

### Removed
- カスタム動画トップから必要のない保存ボタンを削除しました

## [1.2.0] - 2023/03/20

### Added
- シリーズストックの並び替え機能を追加 ([#6](https://github.com/castella-cake/niconico-peppermint-extension/issues/6))
- ウェルカムページを追加

### Changed
- CSSの統合を元に戻しました
- シリーズストックのスクロールバーは縦方向以外表示されなくなりました
- JQueryをlibフォルダーに移動しました
- 設定のインポートで「結合する」がデフォルトでONになりました
- ニコニコロゴをcss内に入れず、クラス変更とプロパティ変更で対応するようにしました

### Fixed
- ランキングページの自動再生に関するヒントを隠すように修正しました
- ビジュアルパッチを有効化した場合にキャレットを隠さないようにしました
- アツマールではダークモードを適用しないようにしました
- aタグの色指定を削除しました
- ストック中のシリーズ管理ページで、テーブルのスクロールを可能にしました
- NicoboxUIでもライブ公開タイムシフト表示に関する修正を行いました

## [1.1.0] - 2023/03/09

### Added
- クレジットページにSpecial Thanksを追加

### Changed
- 設定画面のフォルダー名を``pages`` に変更
- 設定画面内での呼び名を、 ``PepperMintPlus`` から ``PepperMint+`` に変更
- ポップアップの設定画面のデフォルト幅を``360px`` から ``480px`` に変更
- シリーズストックの管理画面の幅を``560px`` に変更
- 法的問題を避けるためにアイコンを一から書き直したものに変更

### Fixed
- NicoboxUI/シアターUIで、ニコニ貢献をリサイズするように修正
- 設定画面の外部リンクを新しいタブで開くように修正
- 動画トップの「フォロー中の新着動画」のユーザー名を明瞭化
- ページ内UIで、ストック中のシリーズがはみ出る問題を修正 ( #5 )
- シリーズの管理画面でシリーズを保存すると、シリーズIDとシリーズ名以外が消滅する問題を修正
- シアターUI/NicoboxUIで、投稿者用メニューの表示が原因でメインの表示が崩れる問題を修正
- 拡張機能との互換性を修正
- シアターUIのビデオサイズに関する修正
- NicoboxUIが有効の場合は、シアターUIの``21:9に拡大``ボタンを表示しないように修正
- 動画トップ2カラムでニコニ広告行に対してflexを追加し、はみ出さないように修正

### Removed
- 16x16のアイコンを削除

## [1.0.0] - 2023/02/22

### Added
- ``ショートカットアシスト`` を追加
- ``視聴ページテーマ`` に ``原宿風`` を追加

### Changed
- 名称を``Niconico-PepperMint`` から ``Niconico-PeppermintPlus`` に変更
- 設定画面を拡張機能管理から開いた場合に幅を設定するように
- 設定画面のページ移動にアニメーションを追加
- 設定画面のダークモード対応を一部変更
- 設定画面のカラーを[Acorn]準拠に変更
- ニコニコ生放送でダークモードのコメント色を一部変更
- 一部のダークモードCSSを統合

### Fixed
- 動画サイズに関する問題を修正
- spwatchリダイレクトが場合によっては動作しない問題を修正
- ニコニコ生放送でダークモードが動作しない場合がある問題を修正
- ダークモードの設定を一度も触ったことがない場合にニコニコ生放送の表示が色がおかしくなる問題を修正

## [0.8.0] - 2023/02/15

### Added
- ``クリーンな投稿者表示``を追加
- ダークモードをブラウザーの設定に追従可能に

### Changed
- ``サポーターボタンを隠す`` をHideセクションに移動
- シアターUIでプレイヤーパネルが非表示の場合に応じてプレイヤーサイズを変更するように変更

### Fixed
- 適切でない変数宣言を``let``に置き換え
- ``プレイヤーテーマ``機能で、プレイヤースタイルが適用されない問題を修正
- シアターUIをダークモード無効の状態で使用した場合に、プレイヤーパネルの視覚的な問題を修正

## [0.7.0] - 2023/02/15

### Added
- ``コメント行``機能を追加

### Changed
- コードの可読性を向上
- 設定画面の文章を一部変更
- READMEにChromeストアに関する記述を追加

### Removed
- 消し忘れコードを削除

## [0.6.0] - 2023/02/14

### Added
- 「ニコニコ大百科で検索」機能を追加  
ニコニコ動画内に限らず、全てのサイト内で単語をニコニコ大百科で検索します。  
検索したい単語を選択したら右クリックして、``ニコニコ大百科で <選択した内容> を検索``をクリックするだけで検索できます。  
- オプションを拡張機能の管理からも変更可能に
- 新バージョンリリース用のファイルを作成する``create.bat``を作成

### Changed
- オプションのタイトル表示を変更

## [0.5.0] - 2023/02/13

### Added
- 大百科向け機能を追加
- ``サポーターボタンを隠す`` 機能を追加
- NicoboxUIのトグル時に簡易アニメーションを追加
- ``ビジュアルパッチ`` にTabブラウジングに配慮したスタイルを追加
- 設定のインポート/エクスポート機能を追加
- 設定のリセット機能を追加

### Changed
- アイコンを変更
- 設定画面のselectにスタイルシートを適用
- READMEに自動更新に関する記述を追加
- ダークモードをiframeに部分対応
- ダークモードで動画トップのアイコンを白に変更するように
- ダークモードで動画トップのジャンル選択を明瞭化
- PepperMintのウィンドウは、ウィンドウ外をクリックした際に自動的に閉じるように
- 視聴ページからシリーズをストックした時、自動的に次の動画と最後に見た動画を保存するように
- シリーズストックのfunctionをPromiseに変更

### Fixed
- ユーザーページ内のダークモードサポートを改善(いいね履歴,視聴履歴)
- ダークモードで視聴ページのギフトのhoverを修正
- サポートのデバッグストレージ情報をfocusでも表示するように
- シアターUIで再生ボタンのヒントがシークバーに隠れる問題を修正
- NicoboxUIでプレイヤーボタンの色に関する問題を修正
- 広告ブロッカーを使用しない環境で2カラム動画トップを使用すると、ランキングに広告が表示されはみ出す問題を解決

### Removed
- AboutページのSupportセクション  
ストレージ表示が設定のインポート/エクスポートに移動したため。
- 16pxアイコンはツールバーアイコンとして使用されなくなりました

## [0.4.0] - 2023-02-03

### Added
- ``動画トップを2カラムで表示``を追加
- ``カスタム動画トップ``を追加
- ``プレイヤーテーマ``に``RC1``を追加
- ``ビジュアルパッチ``を追加  
角丸の混合を軽減したり、line-heightの未指定による文字の切れを軽減します。
- ``PepperMintについて``ページを追加
- ``spwatchリダイレクト``を追加  
spニコニコ動画の視聴ページにアクセスした際に、自動でPC版ニコニコ動画にリダイレクトします。

### Fixed
- パフォーマンス面の軽微な改善
- ``新しいタブで開く``を使用してページを開いた際に、ダークモードが適用されない場合があるバグを改善
- ユーザーページのダークモードサポートを改善(iframe is still not supported at this time)
- 動画のダウンロードボタンを表示した際、視聴方式がHTTPの場合にのみhrefを設定するように変更
- ``視聴ページ上のイベント告知バナーを隠す``が隠されなかった問題を修正(やっぱり)
- NicoboxレイアウトでVideoSymbolがリサイズされず、プレイヤーを操作できない問題を修正
- ``ロック中のタグをハイライト``がシアターUIとNicoboxUIでも使用できるように変更
- Chromium系ブラウザで発生したPepperMintポップアップの誤ったmarginを修正

## [0.3.1] - 2023-01-21

### Fixed
- Chromium系ブラウザで発生したバグを修正
- コメントレンダラーとビデオシンボルの大きさが正しくない問題を修正
- シアターUIの設定がデフォルトでONになっていた問題を修正
- シアターUIのヘッダーが正しく適用されなかった問題を修正

## [0.3.0] - 2023-01-21

### Added
- ``新着通知に赤丸を表示``を追加
- シアターモードの追加
- シリーズストック機能の追加  
シリーズを保存し、動画トップからいつでもアクセスできるようにします
- 動画ダウンロード機能の追加
- 大百科レス評価関連の機能を追加(高評価をニコるに変更/評価数の削除)
- ウォーターマークの追加

### Fixed
- CSS追加関連のfunctionの変更
- その他コードの改善
- ボタン位置を修正
- NicoboxUIのアスペクト比関連を修正

## [0.2.0] - 2023-01-15
### Added
- ``ロック中のタグをハイライト``を追加
- ``プレイヤーテーマ``に``Mint``を追加
- ``ヘッダー背景`` を追加
- ダークモードを追加
- Nicobox風UIを追加

### Changed
- Firefox向けIDの変更

### Removed
- テスト用機能の設定を削除

### Fixed
- ``ニコニコホームの最大幅をニコニコ動画ホームに合わせる`` が適用されない場合がある問題を修正
- storage取得のコードをChromium向けに修正

## 0.1.0 - 2023-01-09

### Added
- スタイルシート追加関連のコードを作成
- ``プレイヤーテーマ``を追加(現在は原宿のみ)
- ``ランキングページのニコニ広告行を隠す``を追加
- ``視聴ページ上のイベント告知バナーを隠す``を追加
- ``フォロー/サポーター/プレ会勧誘を隠す``を追加
- ``マーキーテキストをロゴに置き換え``を追加  
*"Is it legal?" "Yes, it is legal."*

### Removed
- テスト用機能のコードを削除

[Acorn]: https://acorn.firefox.com/latest/acorn.html
[1.6.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.5.3..v1.6.0
[1.5.3]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.5.2..v1.5.3
[1.5.2]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.5.1..v1.5.2
[1.5.1]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.5.0..v1.5.1
[1.5.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.4.0..v1.5.0
[1.4.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.3.0..v1.4.0
[1.3.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.2.0..v1.3.0
[1.2.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.1.0..v1.2.0
[1.1.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v1.0.0..v1.1.0
[1.0.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v0.8.0..v1.0.0
[0.8.0]: https://github.com/astella-cake/niconico-peppermint-extension/compare/v0.7.0..v0.8.0
[0.7.0]: https://github.com/castella-cake/niconico-peppermint-extension/compare/v0.6.0..v0.7.0
[0.6.0]: https://github.com/castella-cake/niconico-peppermint-extension/compare/v0.5.0..v0.6.0
[0.5.0]: https://github.com/castella-cake/niconico-peppermint-extension/compare/v0.4.0..v0.5.0
[0.4.0]: https://github.com/castella-cake/niconico-peppermint-extension/compare/v0.3.1..v0.4.0
[0.3.1]: https://github.com/castella-cake/niconico-peppermint-extension/compare/v0.3rc...v0.3.1
[0.3.0]: https://github.com/castella-cake/niconico-peppermint-extension/compare/cdf30c9..d019f83
[0.2.0]: https://github.com/castella-cake/niconico-peppermint-extension/compare/a7845b0..cdf30c9